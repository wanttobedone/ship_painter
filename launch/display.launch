<!--
  Ship Painter 可视化启动文件

  功能：启动配置好的 Rviz 进行系统可视化

  包含显示：
    - 网格和坐标系
    - B样条轨迹（青色）
    - 实际飞行轨迹
    - MPC 控制器状态
    - VINS 里程计和点云
    - 障碍物建图（膨胀地图、原始地图、深度点云）

  使用方法：
    roslaunch ship_painter display.launch

  可选参数：
    rviz_config:=<配置文件>  指定 rviz 配置文件
-->

<launch>
  <!-- ========================================== -->
  <!-- 参数配置 -->
  <!-- ========================================== -->

  <!-- Rviz 配置文件路径 -->
  <arg name="rviz_config" default="$(find ship_painter)/rviz/ship_painter_VINS.rviz"/>

  <!-- 是否录制屏幕（调试用） -->
  <arg name="record_screen" default="false"/>

  <!-- ========================================== -->
  <!-- Rviz 可视化节点 -->
  <!-- ========================================== -->
  <node name="rviz"
        pkg="rviz"
        type="rviz"
        args="-d $(arg rviz_config)"
        output="screen"
        required="false">
    <!-- 可选：设置 Rviz 窗口大小 -->
    <!-- <env name="QT_QPA_PLATFORM" value="xcb"/> -->
  </node>

  <!-- ========================================== -->
  <!-- 可选：录制功能 -->
  <!-- ========================================== -->
  <group if="$(arg record_screen)">
    <node name="screen_recorder"
          pkg="ros_recorder"
          type="record_screen.sh"
          output="screen"/>
  </group>

  <!-- ========================================== -->
  <!-- 使用说明 -->
  <!-- ========================================== -->
  <!--
  显示配置说明：

  1. 障碍物建图组（默认启用）：
     - 膨胀占据地图（红色，用于避障）
     - 原始占据地图（绿色，默认关闭）
     - 深度点云（白色，默认关闭）
     - 未知区域（默认关闭）

  2. VINS System 组：
     - VINS 里程计
     - VINS 路径
     - VINS 点云（特征点）
     - VINS 相机可视化
     - VINS 关键帧
     - 特征跟踪图像（默认关闭）

  3. B样条轨迹：
     - 青色曲线：规划的平滑轨迹
     - 紫色球：B样条控制点（默认关闭）

  4. MPC 控制器组（默认关闭）：
     - 预测轨迹
     - 参考位姿
     - 实际飞行路径

  快捷键：
    - G: 显示/隐藏网格
    - F: 聚焦到选中的对象
    - R: 重置视角
    - Ctrl+C: 复制选中对象

  自定义配置：
    1. 在 Rviz 中调整显示设置
    2. File -> Save Config As...
    3. 保存到 ship_painter/rviz/ 目录
    4. 修改本文件的 rviz_config 参数

  -->

</launch>
